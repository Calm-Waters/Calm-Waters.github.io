<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom Forge</title>
    <link rel="icon" href="images/favicon.png" type="image/png">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Content will be loaded via script below from modules. The code also supresses the default context menu for UI purposes. -->
    <script>
        document.addEventListener('contextmenu', function(event) {event.preventDefault();});
        function loadPage(moduleName) {
            if ((window[moduleName + '_mod']) && false /* false to force reload during testing*/) {
                document.body.innerHTML = window[moduleName + '_mod'];
                if (window[moduleName + '_init']) window[moduleName + '_init']();
            } else {
                const scriptUrl = `modules/${moduleName}.js`;
                const script = document.createElement('script');
                script.src = scriptUrl;
                script.type = 'module';
                script.onload = function() {
                    const content = window[moduleName + '_mod'];
                    if (content) document.body.innerHTML = content, window[moduleName + '_init'] && window[moduleName + '_init']();
                    else document.body.innerHTML = '<p>Error: Module content is undefined.</p>';
                };
                script.onerror = function() {document.body.innerHTML = '<p>Error loading module.</p>'; };
                document.body.appendChild(script);
            }
        }
        loadPage('hub');
    </script>
</body>
</html>
