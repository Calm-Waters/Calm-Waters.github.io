<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom Forge</title>
    <link rel="icon" href="images/favicon.png" type="image/png">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <script>
        // suppress the default context menu since this is meant to be closer to a game than a webpage, UI-wise. Anyone who really wants to see it can just use a keyboard shortcut.
        document.addEventListener('contextmenu', function(event) {
            // Prevent the default context menu
            event.preventDefault();
        });

        // load module as main page
        function loadPage(moduleName) {
            if ((window[moduleName + '_mod']) && false /* false to force reload during testing*/) {
                document.body.innerHTML = window[moduleName + '_mod'];
                // Run any additional JavaScript logic in the module if it exists
                if (window[moduleName + '_init']) {
                    window[moduleName + '_init'](); 
                }
            } else {
                const scriptUrl = `modules/${moduleName}.js`;
                const script = document.createElement('script');
                script.src = scriptUrl;
                script.type = 'text/javascript';
                script.onload = function() {
                    const content = window[moduleName + '_mod'];
                    if (content) {
                        document.body.innerHTML = content;
                        if (window[moduleName + '_init']) {
                            window[moduleName + '_init'](); 
                        }
                    } else {
                        document.body.innerHTML = '<p>Error: Module content is undefined.</p>';
                    }
                };
                script.onerror = function() {
                    document.body.innerHTML = '<p>Error loading module.</p>';
                };
                document.body.appendChild(script);
            }
        }
        loadPage('login');

        //login
        function handleLogin(event){
            event.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            // Authentification logic (currently placeholder)
            if (username === 'username' && password === 'password') {
                loadPage('hub');  
            } else {
                alert('Invalid username or password');
            }
        }
    </script>
</body>
</html>
