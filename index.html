<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom Forge</title>
    <link rel="icon" href="images/favicon.png" type="image/png">
    <link rel="stylesheet" href="styles.css">
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
        const firebaseConfig = {
            apiKey: "AIzaSyA3k7RiiqOTWRyNgFdw4Z2-c1Cm106OdLo",
            authDomain: "custom-nexus.firebaseapp.com",
            databaseURL: "https://custom-nexus-default-rtdb.firebaseio.com",
            projectId: "custom-nexus",
            storageBucket: "custom-nexus.firebasestorage.app",
            messagingSenderId: "469054983781",
            appId: "1:469054983781:web:ac4f0bc7681074b6edc08c",
        };
        const app = initializeApp(firebaseConfig);
    </script>
</head>
<body>
    <!-- Content will be loaded via script below from modules. The code also supresses the default context menu for UI purposes. -->
    <script>
        document.addEventListener('contextmenu', function(event) {event.preventDefault();});
        function loadPage(moduleName) {
            if (window[moduleName + '_layout'] && false /* false to force reload during testing*/) {
                document.body.innerHTML = window[moduleName + '_layout'];
                if (window[moduleName + '_init']) window[moduleName + '_init']();
            } else {
                const scriptUrl = `modules/${moduleName}.js?version=${new Date().getTime()}`; // Cache-busting query parameter
                const script = document.createElement('script');
                script.src = scriptUrl;
                script.type = 'module'; // Use ES6 module
                script.onload = function() {
                    const content = window[moduleName + '_layout'];
                    if (content) document.body.innerHTML = content;
                    else document.body.innerHTML = '<p>Error: Module content is undefined.</p>';
                    if (window[moduleName + '_init']) window[moduleName + '_init']();
                };
                script.onerror = function() {document.body.innerHTML = '<p>Error loading module.</p>';};
                document.body.appendChild(script);
            }
        }      
        loadPage('hub');
    </script>
</body>
</html>
